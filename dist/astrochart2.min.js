/*!
 * 
 *       astrochart2
 *       A JavaScript for generating Astrology charts.
 *       Version: 0.7.2
 *       Author: Tom Jurman (tomasjurman@kibo.cz)
 *       Licence: GNUv3 (https://www.gnu.org/licenses/gpl-3.0.en.html)
 *
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.astrology=e():t.astrology=e()}(self,(()=>(()=>{"use strict";var t={d:(e,i)=>{for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{RadixChart:()=>Tt,SVGUtils:()=>lt,TransitChart:()=>It,Universe:()=>Lt,Utils:()=>Ct});var i={};t.r(i),t.d(i,{CHART_ALLOW_HOUSE_OVERLAP:()=>g,CHART_DRAW_MAIN_AXIS:()=>l,CHART_FONT_FAMILY:()=>R,CHART_MAIN_STROKE:()=>h,CHART_PADDING:()=>S,CHART_STROKE:()=>_,CHART_STROKE_ONLY:()=>u,CHART_VIEWBOX_HEIGHT:()=>c,CHART_VIEWBOX_WIDTH:()=>o});var s={};t.r(s),t.d(s,{RADIX_AXIS_FONT_SIZE:()=>T,RADIX_HOUSE_FONT_SIZE:()=>E,RADIX_ID:()=>C,RADIX_POINTS_FONT_SIZE:()=>d,RADIX_SIGNS_FONT_SIZE:()=>A});var n={};t.r(n),t.d(n,{TRANSIT_ID:()=>I,TRANSIT_POINTS_FONT_SIZE:()=>L});var r={};t.r(r),t.d(r,{POINT_COLLISION_RADIUS:()=>H,POINT_PROPERTIES_ANGLE_OFFSET:()=>D,POINT_PROPERTIES_ANGLE_SIZE:()=>Y,POINT_PROPERTIES_DIGNITY_OFFSET:()=>x,POINT_PROPERTIES_DIGNITY_SIZE:()=>G,POINT_PROPERTIES_DIGNITY_SYMBOLS:()=>m,POINT_PROPERTIES_FONT_SIZE:()=>f,POINT_PROPERTIES_RETROGRADE_OFFSET:()=>P,POINT_PROPERTIES_RETROGRADE_SIZE:()=>B,POINT_PROPERTIES_SHOW:()=>N,POINT_PROPERTIES_SHOW_ANGLE:()=>p,POINT_PROPERTIES_SHOW_DIGNITY:()=>M,POINT_PROPERTIES_SHOW_RETROGRADE:()=>b});var a={};t.r(a),t.d(a,{ASPECTS_BACKGROUND_COLOR:()=>y,ASPECT_COLORS:()=>Ot,CHART_BACKGROUND_COLOR:()=>V,CHART_CIRCLE_COLOR:()=>w,CHART_HOUSE_NUMBER_COLOR:()=>k,CHART_LINE_COLOR:()=>X,CHART_MAIN_AXIS_COLOR:()=>v,CHART_POINTS_COLOR:()=>K,CHART_SIGNS_COLOR:()=>W,CHART_TEXT_COLOR:()=>F,CIRCLE_COLOR:()=>at,COLOR_AQUARIUS:()=>nt,COLOR_ARIES:()=>Q,COLOR_CANCER:()=>j,COLOR_CAPRICORN:()=>st,COLOR_GEMINI:()=>$,COLOR_LEO:()=>J,COLOR_LIBRA:()=>tt,COLOR_PISCES:()=>rt,COLOR_SAGITTARIUS:()=>it,COLOR_SCORPIO:()=>et,COLOR_TAURUS:()=>z,COLOR_VIRGO:()=>q,PLANETS_BACKGROUND_COLOR:()=>U,PLANET_COLORS:()=>St,POINT_PROPERTIES_COLOR:()=>Z,SIGN_COLORS:()=>ot,TRANSIT_PLANET_COLORS:()=>ct});var O={};t.r(O),t.d(O,{ASPECTS_FONT_SIZE:()=>ut,ASPECTS_ID:()=>_t,DEFAULT_ASPECTS:()=>Rt,DRAW_ASPECTS:()=>ht});const S=40,o=800,c=800,_=1,h=2,u=!1,R="Astronomicon",g=!1,l=!0,C="radix",d=27,E=20,A=27,T=32,I="transit",L=27,N=!0,p=!0,M=!0,b=!0,m=["r","d","e","f"],f=16,Y=25,B=25,G=12,D=2,P=3.5,x=5,H=12,V="none",U="#fff",y="#eee",w="#333",X="#666",F="#bbb",k="#333",v="#000",W="#333",K="#000",Z="#333",Q="#FF4500",z="#8B4513",$="#87CEEB",j="#27AE60",J="#FF4500",q="#8B4513",tt="#87CEEB",et="#27AE60",it="#FF4500",st="#8B4513",nt="#87CEEB",rt="#27AE60",at="#333",Ot={Conjunction:"#333",Opposition:"#1B4F72",Square:"#641E16",Trine:"#0B5345",Sextile:"#333",Quincunx:"#333",Semisextile:"#333",Quintile:"#333",Trioctile:"#333"},St={},ot={},ct={},_t="aspects",ht=!0,ut=18,Rt=[{name:"Conjunction",angle:0,orb:2},{name:"Opposition",angle:180,orb:2},{name:"Trine",angle:120,orb:2},{name:"Square",angle:90,orb:2}],gt=Object.assign({},i,s,n,r,a,O);class lt{static SVG_NAMESPACE="http://www.w3.org/2000/svg";static SYMBOL_ARIES="Aries";static SYMBOL_TAURUS="Taurus";static SYMBOL_GEMINI="Gemini";static SYMBOL_CANCER="Cancer";static SYMBOL_LEO="Leo";static SYMBOL_VIRGO="Virgo";static SYMBOL_LIBRA="Libra";static SYMBOL_SCORPIO="Scorpio";static SYMBOL_SAGITTARIUS="Sagittarius";static SYMBOL_CAPRICORN="Capricorn";static SYMBOL_AQUARIUS="Aquarius";static SYMBOL_PISCES="Pisces";static SYMBOL_SUN="Sun";static SYMBOL_MOON="Moon";static SYMBOL_MERCURY="Mercury";static SYMBOL_VENUS="Venus";static SYMBOL_EARTH="Earth";static SYMBOL_MARS="Mars";static SYMBOL_JUPITER="Jupiter";static SYMBOL_SATURN="Saturn";static SYMBOL_URANUS="Uranus";static SYMBOL_NEPTUNE="Neptune";static SYMBOL_PLUTO="Pluto";static SYMBOL_CHIRON="Chiron";static SYMBOL_LILITH="Lilith";static SYMBOL_NNODE="NNode";static SYMBOL_SNODE="SNode";static SYMBOL_AS="As";static SYMBOL_DS="Ds";static SYMBOL_MC="Mc";static SYMBOL_IC="Ic";static SYMBOL_RETROGRADE="Retrograde";static SYMBOL_CONJUNCTION="Conjunction";static SYMBOL_OPPOSITION="Opposition";static SYMBOL_SQUARE="Square";static SYMBOL_TRINE="Trine";static SYMBOL_SEXTILE="Sextile";static SYMBOL_QUINCUNX="Quincunx";static SYMBOL_SEMISEXTILE="Semisextile";static SYMBOL_OCTILE="Octile";static SYMBOL_TRIOCTILE="Trioctile";static SYMBOL_ARIES_CODE="A";static SYMBOL_TAURUS_CODE="B";static SYMBOL_GEMINI_CODE="C";static SYMBOL_CANCER_CODE="D";static SYMBOL_LEO_CODE="E";static SYMBOL_VIRGO_CODE="F";static SYMBOL_LIBRA_CODE="G";static SYMBOL_SCORPIO_CODE="H";static SYMBOL_SAGITTARIUS_CODE="I";static SYMBOL_CAPRICORN_CODE="J";static SYMBOL_AQUARIUS_CODE="K";static SYMBOL_PISCES_CODE="L";static SYMBOL_SUN_CODE="Q";static SYMBOL_MOON_CODE="R";static SYMBOL_MERCURY_CODE="S";static SYMBOL_VENUS_CODE="T";static SYMBOL_EARTH_CODE=">";static SYMBOL_MARS_CODE="U";static SYMBOL_JUPITER_CODE="V";static SYMBOL_SATURN_CODE="W";static SYMBOL_URANUS_CODE="X";static SYMBOL_NEPTUNE_CODE="Y";static SYMBOL_PLUTO_CODE="Z";static SYMBOL_CHIRON_CODE="q";static SYMBOL_LILITH_CODE="z";static SYMBOL_NNODE_CODE="g";static SYMBOL_SNODE_CODE="i";static SYMBOL_AS_CODE="c";static SYMBOL_DS_CODE="f";static SYMBOL_MC_CODE="d";static SYMBOL_IC_CODE="e";static SYMBOL_RETROGRADE_CODE="M";static SYMBOL_CONJUNCTION_CODE="!";static SYMBOL_OPPOSITION_CODE='"';static SYMBOL_SQUARE_CODE="#";static SYMBOL_TRINE_CODE="$";static SYMBOL_SEXTILE_CODE="%";static SYMBOL_QUINCUNX_CODE="&";static SYMBOL_SEMISEXTILE_CODE="''";static SYMBOL_OCTILE_CODE="(";static SYMBOL_TRIOCTILE_CODE=")";constructor(){if(this instanceof lt)throw Error("This is a static class and cannot be instantiated.")}static SVGDocument(t,e){const i=document.createElementNS(lt.SVG_NAMESPACE,"svg");return i.setAttribute("xmlns",lt.SVG_NAMESPACE),i.setAttribute("version","1.1"),i.setAttribute("viewBox","0 0 "+t+" "+e),i}static SVGGroup(){return document.createElementNS(lt.SVG_NAMESPACE,"g")}static SVGPath(){return document.createElementNS(lt.SVG_NAMESPACE,"path")}static SVGMask(t){const e=document.createElementNS(lt.SVG_NAMESPACE,"mask");return e.setAttribute("id",t),e}static SVGSegment(t,e,i,s,n,r,a,O){const S=a||0,o=O||0,c=document.createElementNS(lt.SVG_NAMESPACE,"path");return c.setAttribute("d","M "+(t+r*Math.cos(s))+", "+(e+r*Math.sin(s))+" l "+(i-r)*Math.cos(s)+", "+(i-r)*Math.sin(s)+" A "+i+", "+i+",0 ,"+S+", "+o+", "+(t+i*Math.cos(n))+", "+(e+i*Math.sin(n))+" l "+(i-r)*-Math.cos(n)+", "+(i-r)*-Math.sin(n)+" A "+r+", "+r+",0 ,"+S+", 1, "+(t+r*Math.cos(s))+", "+(e+r*Math.sin(s))),c.setAttribute("fill","none"),c}static SVGCircle(t,e,i){const s=document.createElementNS(lt.SVG_NAMESPACE,"circle");return s.setAttribute("cx",t),s.setAttribute("cy",e),s.setAttribute("r",i),s.setAttribute("fill","none"),s}static SVGLine(t,e,i,s){const n=document.createElementNS(lt.SVG_NAMESPACE,"line");return n.setAttribute("x1",t),n.setAttribute("y1",e),n.setAttribute("x2",i),n.setAttribute("y2",s),n}static SVGText(t,e,i){const s=document.createElementNS(lt.SVG_NAMESPACE,"text");return s.setAttribute("x",t),s.setAttribute("y",e),s.setAttribute("stroke","none"),s.appendChild(document.createTextNode(i)),s}static SVGSymbol(t,e,i){switch(t){case lt.SYMBOL_AS:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_AS_CODE)}(e,i);case lt.SYMBOL_DS:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_DS_CODE)}(e,i);case lt.SYMBOL_MC:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_MC_CODE)}(e,i);case lt.SYMBOL_IC:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_IC_CODE)}(e,i);case lt.SYMBOL_ARIES:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_ARIES_CODE)}(e,i);case lt.SYMBOL_TAURUS:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_TAURUS_CODE)}(e,i);case lt.SYMBOL_GEMINI:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_GEMINI_CODE)}(e,i);case lt.SYMBOL_CANCER:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_CANCER_CODE)}(e,i);case lt.SYMBOL_LEO:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_LEO_CODE)}(e,i);case lt.SYMBOL_VIRGO:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_VIRGO_CODE)}(e,i);case lt.SYMBOL_LIBRA:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_LIBRA_CODE)}(e,i);case lt.SYMBOL_SCORPIO:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_SCORPIO_CODE)}(e,i);case lt.SYMBOL_SAGITTARIUS:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_SAGITTARIUS_CODE)}(e,i);case lt.SYMBOL_CAPRICORN:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_CAPRICORN_CODE)}(e,i);case lt.SYMBOL_AQUARIUS:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_AQUARIUS_CODE)}(e,i);case lt.SYMBOL_PISCES:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_PISCES_CODE)}(e,i);case lt.SYMBOL_SUN:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_SUN_CODE)}(e,i);case lt.SYMBOL_MOON:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_MOON_CODE)}(e,i);case lt.SYMBOL_MERCURY:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_MERCURY_CODE)}(e,i);case lt.SYMBOL_VENUS:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_VENUS_CODE)}(e,i);case lt.SYMBOL_EARTH:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_EARTH_CODE)}(e,i);case lt.SYMBOL_MARS:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_MARS_CODE)}(e,i);case lt.SYMBOL_JUPITER:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_JUPITER_CODE)}(e,i);case lt.SYMBOL_SATURN:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_SATURN_CODE)}(e,i);case lt.SYMBOL_URANUS:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_URANUS_CODE)}(e,i);case lt.SYMBOL_NEPTUNE:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_NEPTUNE_CODE)}(e,i);case lt.SYMBOL_PLUTO:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_PLUTO_CODE)}(e,i);case lt.SYMBOL_CHIRON:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_CHIRON_CODE)}(e,i);case lt.SYMBOL_LILITH:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_LILITH_CODE)}(e,i);case lt.SYMBOL_NNODE:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_NNODE_CODE)}(e,i);case lt.SYMBOL_SNODE:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_SNODE_CODE)}(e,i);case lt.SYMBOL_RETROGRADE:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_RETROGRADE_CODE)}(e,i);case lt.SYMBOL_CONJUNCTION:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_CONJUNCTION_CODE)}(e,i);case lt.SYMBOL_OPPOSITION:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_OPPOSITION_CODE)}(e,i);case lt.SYMBOL_SQUARE:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_SQUARE_CODE)}(e,i);case lt.SYMBOL_TRINE:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_TRINE_CODE)}(e,i);case lt.SYMBOL_SEXTILE:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_SEXTILE_CODE)}(e,i);case lt.SYMBOL_QUINCUNX:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_QUINCUNX_CODE)}(e,i);case lt.SYMBOL_SEMISEXTILE:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_SEMISEXTILE_CODE)}(e,i);case lt.SYMBOL_OCTILE:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_OCTILE_CODE)}(e,i);case lt.SYMBOL_TRIOCTILE:return function(t,e){return lt.SVGText(t,e,lt.SYMBOL_TRIOCTILE_CODE)}(e,i);default:const t=lt.SVGCircle(e,i,8);return t.setAttribute("stroke","#333"),t}}}class Ct{constructor(){if(this instanceof Ct)throw Error("This is a static class and cannot be instantiated.")}static DEG_360=360;static DEG_180=180;static DEG_0=0;static generateUniqueId=function(){return`id_${1e6*Math.random()}_${Date.now()}`};static degreeToRadian=function(t){return((arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)-t)*Math.PI/180};static radianToDegree=function(t){return 180*t/Math.PI};static positionOnCircle(t,e,i,s){return{x:i*Math.cos(s)+t,y:i*Math.sin(s)+e}}static positionToAngle(t,e,i,s){const n=i-t,r=s-e,a=Math.atan2(r,n);return Ct.radianToDegree(a)}static calculatePositionWithoutOverlapping(t,e,i){const s=Ct.DEG_360/10,n=new Array(s).fill(0);for(const e of t){n[Math.floor(e.angle/10)]+=1}const r=10*n.findIndex((t=>0==t)),a=t.map((t=>({name:t.name,angle:t.angle<r?t.angle+Ct.DEG_360:t.angle})));a.sort(((t,e)=>t.angle-e.angle));const O=()=>{for(let t=0,s=a.length;t<s;t++){const s=Ct.positionOnCircle(0,0,i,Ct.degreeToRadian(a[t].angle));a[t].x=s.x,a[t].y=s.y;for(let i=0;i<t;i++){Math.sqrt(Math.pow(a[t].x-a[i].x,2)+Math.pow(a[t].y-a[i].y,2))<2*e&&(a[t].angle+=1,a[i].angle-=1,O())}}};return O(),a.reduce(((t,e,i)=>(t[e.name]=e.angle,t)),{})}static isCollision(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return void 0!==e.find((e=>{let s=e-t>Ct.DEG_180?t+Ct.DEG_360:t,n=t-e>Ct.DEG_180?e+Ct.DEG_360:e;return Math.abs(s-n)<=i}))}static cleanUp(t,e){let i=document.getElementById(t);i&&("function"==typeof e&&e(),i.innerHTML="")}}class dt{constructor(){if(this instanceof dt)throw Error("This is a static class and cannot be instantiated.")}static orb(t,e,i){let s,n=t>e?1:-1,r=Math.abs(t-e);return r>Ct.DEG_180?(r=Ct.DEG_360-r,s=-1*(r-i)):s=(r-i)*n,Number(Number(s).toFixed(2))}static getAspects(t,e,i){const s=[];for(const n of t)for(const t of e)for(const e of i){const i=dt.orb(n.angle,t.angle,e.angle);Math.abs(i)<=e.orb&&s.push({aspect:e,from:n,to:t,precision:i})}return s}static drawAspects(t,e,i,s){const n=i.CHART_VIEWBOX_WIDTH/2,r=i.CHART_VIEWBOX_HEIGHT/2,a=lt.SVGGroup();for(const O of s){const s=Ct.positionOnCircle(n,r,t,Ct.degreeToRadian(O.from.angle,e)),S=Ct.positionOnCircle(n,r,t,Ct.degreeToRadian(O.to.angle,e)),o=(s.x+S.x)/2,c=(s.y+S.y)/2,_=lt.SVGSymbol(O.aspect.name,o,c);_.setAttribute("font-family",i.CHART_FONT_FAMILY),_.setAttribute("text-anchor","middle"),_.setAttribute("dominant-baseline","middle"),_.setAttribute("font-size",i.ASPECTS_FONT_SIZE),_.setAttribute("fill",i.ASPECT_COLORS[O.aspect.name]??"#333");const h=s.x+(S.x-s.x)/2.2,u=s.y+(S.y-s.y)/2.2,R=S.x+(s.x-S.x)/2.2,g=S.y+(s.y-S.y)/2.2,l=lt.SVGLine(s.x,s.y,h,u);l.setAttribute("stroke",i.ASPECT_COLORS[O.aspect.name]??"#333"),l.setAttribute("stroke-width",i.CHART_STROKE);const C=lt.SVGLine(R,g,S.x,S.y);C.setAttribute("stroke",i.ASPECT_COLORS[O.aspect.name]??"#333"),C.setAttribute("stroke-width",i.CHART_STROKE),a.appendChild(l),a.appendChild(C),a.appendChild(_)}return a}}class Et{constructor(t){}validateData(t){if(!t)throw new Error("Mising param data.");if(!Array.isArray(t.points))return{isValid:!1,message:"points is not Array."};if(!Array.isArray(t.cusps))return{isValid:!1,message:"cups is not Array."};if(12!==t.cusps.length)return{isValid:!1,message:"cusps.length !== 12"};for(let e of t.points){if("string"!=typeof e.name)return{isValid:!1,message:"point.name !== 'string'"};if(0===e.name.length)return{isValid:!1,message:"point.name.length == 0"};if("number"!=typeof e.angle)return{isValid:!1,message:"point.angle !== 'number'"}}for(let e of t.cusps)if("number"!=typeof e.angle)return{isValid:!1,message:"cusp.angle !== 'number'"};return{isValid:!0,message:""}}setData(t){throw new Error("Must be implemented by subclass.")}getPoints(){throw new Error("Must be implemented by subclass.")}getPoint(t){throw new Error("Must be implemented by subclass.")}animateTo(t){throw new Error("Must be implemented by subclass.")}}class At{#t;#e;#i;#s;#n;constructor(t,e,i){if(this.#t=t.name??"Unknown",this.#e=t.angle??0,this.#i=t.isRetrograde??!1,!Array.isArray(e)||12!=e.length)throw new Error("Bad param cusps. ");if(this.#s=e,!i)throw new Error("Bad param settings.");this.#n=i}getName(){return this.#t}isRetrograde(){return this.#i}getAngle(){return this.#e}getSymbol(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const n=lt.SVGGroup(),r=lt.SVGSymbol(this.#t,t,e);if(n.appendChild(r),0==s)return n;const a=this.#n.CHART_VIEWBOX_WIDTH/2,O=this.#n.CHART_VIEWBOX_HEIGHT/2,S=Ct.positionToAngle(t,e,a,O);return this.#n.POINT_PROPERTIES_SHOW_ANGLE&&function(){const s=Ct.positionOnCircle(t,e,this.#n.POINT_PROPERTIES_ANGLE_OFFSET*this.#n.POINT_COLLISION_RADIUS,Ct.degreeToRadian(-S,i)),r=lt.SVGText(s.x,s.y,this.getAngleInSign());r.setAttribute("font-family",this.#n.CHART_FONT_FAMILY),r.setAttribute("text-anchor","middle"),r.setAttribute("dominant-baseline","middle"),r.setAttribute("font-size",this.#n.POINT_PROPERTIES_ANGLE_SIZE||this.#n.POINT_PROPERTIES_FONT_SIZE),r.setAttribute("fill",this.#n.POINT_PROPERTIES_ANGLE_COLOR||this.#n.POINT_PROPERTIES_COLOR),n.appendChild(r)}.call(this),this.#n.POINT_PROPERTIES_SHOW_RETROGRADE&&this.#i&&function(){const s=Ct.positionOnCircle(t,e,this.#n.POINT_PROPERTIES_RETROGRADE_OFFSET*this.#n.POINT_COLLISION_RADIUS,Ct.degreeToRadian(-S,i)),r=lt.SVGText(s.x,s.y,lt.SYMBOL_RETROGRADE_CODE);r.setAttribute("font-family",this.#n.CHART_FONT_FAMILY),r.setAttribute("text-anchor","middle"),r.setAttribute("dominant-baseline","middle"),r.setAttribute("font-size",this.#n.POINT_PROPERTIES_RETROGRADE_SIZE||this.#n.POINT_PROPERTIES_FONT_SIZE),r.setAttribute("fill",this.#n.POINT_PROPERTIES_RETROGRADE_COLOR||this.#n.POINT_PROPERTIES_COLOR),n.appendChild(r)}.call(this),this.#n.POINT_PROPERTIES_SHOW_DIGNITY&&this.getDignity()&&function(){const s=Ct.positionOnCircle(t,e,this.#n.POINT_PROPERTIES_DIGNITY_OFFSET*this.#n.POINT_COLLISION_RADIUS,Ct.degreeToRadian(-S,i)),r=lt.SVGText(s.x,s.y,this.getDignity());r.setAttribute("font-family","sans-serif"),r.setAttribute("text-anchor","middle"),r.setAttribute("dominant-baseline","middle"),r.setAttribute("font-size",this.#n.POINT_PROPERTIES_DIGNITY_SIZE||this.#n.POINT_PROPERTIES_FONT_SIZE),r.setAttribute("fill",this.#n.POINT_PROPERTIES_DIGNITY_COLOR||this.#n.POINT_PROPERTIES_COLOR),n.appendChild(r)}.call(this),n}getHouseNumber(){throw new Error("Not implemented yet.")}getSignNumber(){let t=this.#e%Ct.DEG_360;return Math.floor(t/30+1)}getAngleInSign(){return Math.floor(this.#e%30)}getDignity(){const t=this.#n.POINT_PROPERTIES_DIGNITY_SYMBOLS[0],e=this.#n.POINT_PROPERTIES_DIGNITY_SYMBOLS[1],i=this.#n.POINT_PROPERTIES_DIGNITY_SYMBOLS[2],s=this.#n.POINT_PROPERTIES_DIGNITY_SYMBOLS[3];switch(this.#t){case lt.SYMBOL_SUN:return 5==this.getSignNumber()?t:11==this.getSignNumber()?e:6==this.getSignNumber()?s:1==this.getSignNumber()?i:"";case lt.SYMBOL_MOON:return 4==this.getSignNumber()?t:10==this.getSignNumber()?e:8==this.getSignNumber()?s:2==this.getSignNumber()?i:"";case lt.SYMBOL_MERCURY:return 3==this.getSignNumber()?t:9==this.getSignNumber()?e:12==this.getSignNumber()?s:6==this.getSignNumber()?i:"";case lt.SYMBOL_VENUS:return 2==this.getSignNumber()||7==this.getSignNumber()?t:1==this.getSignNumber()||8==this.getSignNumber()?e:6==this.getSignNumber()?s:12==this.getSignNumber()?i:"";case lt.SYMBOL_MARS:return 1==this.getSignNumber()||8==this.getSignNumber()?t:2==this.getSignNumber()||7==this.getSignNumber()?e:4==this.getSignNumber()?s:10==this.getSignNumber()?i:"";case lt.SYMBOL_JUPITER:return 9==this.getSignNumber()||12==this.getSignNumber()?t:3==this.getSignNumber()||6==this.getSignNumber()?e:10==this.getSignNumber()?s:4==this.getSignNumber()?i:"";case lt.SYMBOL_SATURN:return 10==this.getSignNumber()||11==this.getSignNumber()?t:4==this.getSignNumber()||5==this.getSignNumber()?e:1==this.getSignNumber()?s:7==this.getSignNumber()?i:"";case lt.SYMBOL_URANUS:return 11==this.getSignNumber()?t:5==this.getSignNumber()?e:2==this.getSignNumber()?s:8==this.getSignNumber()?i:"";case lt.SYMBOL_NEPTUNE:return 12==this.getSignNumber()?t:6==this.getSignNumber()?e:3==this.getSignNumber()||11==this.getSignNumber()?s:9==this.getSignNumber()||5==this.getSignNumber()?i:"";case lt.SYMBOL_PLUTO:return 8==this.getSignNumber()?t:2==this.getSignNumber()?e:7==this.getSignNumber()?s:1==this.getSignNumber()?i:"";default:return""}}}class Tt extends Et{#r=24;#a;#n;#O;#S;#o;#c;#_;#h;constructor(t){if(!t instanceof Lt)throw new Error("Bad param universe.");return super(t.getSettings()),this.#a=t,this.#n=this.#a.getSettings(),this.#o=this.#n.CHART_VIEWBOX_WIDTH/2,this.#c=this.#n.CHART_VIEWBOX_HEIGHT/2,this.#_=Math.min(this.#o,this.#c)-this.#n.CHART_PADDING,this.#O=lt.SVGGroup(),this.#O.setAttribute("id",`${this.#n.HTML_ELEMENT_ID}-${this.#n.RADIX_ID}`),this.#a.getSVGDocument().appendChild(this.#O),this}setData(t){let e=this.validateData(t);if(!e.isValid)throw new Error(e.message);return this.#S=t,this.#u(t),this}getData(){return{points:[...this.#S.points],cusps:[...this.#S.cusps]}}setNumberOfLevels(t){return this.#r=Math.max(24,t),this.#S&&this.#u(this.#S),this}getRadius(){return this.#_}getOuterCircleRadius(){return this.getRadius()/this.#r*24}getInnerCircleRadius(){return this.getRadius()/this.#r*21}getRullerCircleRadius(){return this.getRadius()/this.#r*20}getPointCircleRadius(){return this.getRadius()/this.#r*18}getCenterCircleRadius(){return this.getRadius()/this.#r*12}getUniverse(){return this.#a}getAscendantShift(){return(this.#S?.cusps[0]?.angle??0)+Ct.DEG_180}getAspects(t,e,i){if(this.#S)return t=t??this.#S.points.filter((t=>!("aspect"in t)||t.aspect)),e=e??[...this.#S.points.filter((t=>!("aspect"in t)||t.aspect)),...this.#S.cusps.filter((t=>t.aspect))],i=i??this.#n.DEFAULT_ASPECTS??gt.DEFAULT_ASPECTS,dt.getAspects(t,e,i).filter((t=>t.from.name!=t.to.name))}drawAspects(t,e,i){const s=this.#a.getAspectsElement();Ct.cleanUp(s.getAttribute("id"),this.#h);const n=this.getAspects(t,e,i).reduce(((t,e)=>(t.some((t=>t.from.name==e.to.name&&t.to.name==e.from.name))||t.push(e),t)),[]).filter((t=>"Conjunction"!=t.aspect.name)),r=lt.SVGCircle(this.#o,this.#c,this.getCenterCircleRadius());return r.setAttribute("fill",this.#n.ASPECTS_BACKGROUND_COLOR),s.appendChild(r),s.appendChild(dt.drawAspects(this.getCenterCircleRadius(),this.getAscendantShift(),this.#n,n)),this}#u(t){Ct.cleanUp(this.#O.getAttribute("id"),this.#h),this.#R(),this.#g(),this.#l(),this.#C(t),this.#d(t),this.#n.CHART_DRAW_MAIN_AXIS&&this.#E(t),this.#A(),this.#n.DRAW_ASPECTS&&this.drawAspects()}#R(){const t=`${this.#n.HTML_ELEMENT_ID}-${this.#n.RADIX_ID}-background-mask-1`,e=lt.SVGGroup(),i=lt.SVGMask(t),s=lt.SVGCircle(this.#o,this.#c,this.getRadius());s.setAttribute("fill","white"),i.appendChild(s);const n=lt.SVGCircle(this.#o,this.#c,this.getCenterCircleRadius());n.setAttribute("fill","black"),i.appendChild(n),e.appendChild(i);const r=lt.SVGCircle(this.#o,this.#c,this.getRadius());r.setAttribute("fill",this.#n.CHART_STROKE_ONLY?"none":this.#n.PLANETS_BACKGROUND_COLOR),r.setAttribute("mask",this.#n.CHART_STROKE_ONLY?"none":`url(#${t})`),e.appendChild(r),this.#O.appendChild(e)}#g(){const t=[this.#n.COLOR_ARIES,this.#n.COLOR_TAURUS,this.#n.COLOR_GEMINI,this.#n.COLOR_CANCER,this.#n.COLOR_LEO,this.#n.COLOR_VIRGO,this.#n.COLOR_LIBRA,this.#n.COLOR_SCORPIO,this.#n.COLOR_SAGITTARIUS,this.#n.COLOR_CAPRICORN,this.#n.COLOR_AQUARIUS,this.#n.COLOR_PISCES],e=[lt.SYMBOL_ARIES,lt.SYMBOL_TAURUS,lt.SYMBOL_GEMINI,lt.SYMBOL_CANCER,lt.SYMBOL_LEO,lt.SYMBOL_VIRGO,lt.SYMBOL_LIBRA,lt.SYMBOL_SCORPIO,lt.SYMBOL_SAGITTARIUS,lt.SYMBOL_CAPRICORN,lt.SYMBOL_AQUARIUS,lt.SYMBOL_PISCES],i=(t,i)=>{let s=Ct.positionOnCircle(this.#o,this.#c,this.getOuterCircleRadius()-(this.getOuterCircleRadius()-this.getInnerCircleRadius())/2,Ct.degreeToRadian(i+15,this.getAscendantShift())),n=lt.SVGSymbol(e[t],s.x,s.y);return n.setAttribute("font-family",this.#n.CHART_FONT_FAMILY),n.setAttribute("text-anchor","middle"),n.setAttribute("dominant-baseline","middle"),n.setAttribute("font-size",this.#n.RADIX_SIGNS_FONT_SIZE),n.setAttribute("fill",this.#n.SIGN_COLORS[t]??this.#n.CHART_SIGNS_COLOR),n},s=(e,i,s)=>{let n=Ct.degreeToRadian(i,this.getAscendantShift()),r=Ct.degreeToRadian(s,this.getAscendantShift()),a=lt.SVGSegment(this.#o,this.#c,this.getOuterCircleRadius(),n,r,this.getInnerCircleRadius());return a.setAttribute("fill",this.#n.CHART_STROKE_ONLY?"none":t[e]),a.setAttribute("stroke",this.#n.CHART_STROKE_ONLY?this.#n.CIRCLE_COLOR:"none"),a.setAttribute("stroke-width",this.#n.CHART_STROKE_ONLY?this.#n.CHART_STROKE:0),a};let n=0,r=n+30;const a=lt.SVGGroup();for(let t=0;t<12;t++){let e=s(t,n,r);a.appendChild(e);let O=i(t,n);a.appendChild(O),n+=30,r=n+30}this.#O.appendChild(a)}#l(){const t=lt.SVGGroup();let e=this.getAscendantShift();for(let i=0;i<72;i++){let s=Ct.positionOnCircle(this.#o,this.#c,this.getRullerCircleRadius(),Ct.degreeToRadian(e)),n=Ct.positionOnCircle(this.#o,this.#c,i%2?this.getInnerCircleRadius()-(this.getInnerCircleRadius()-this.getRullerCircleRadius())/2:this.getInnerCircleRadius(),Ct.degreeToRadian(e));const r=lt.SVGLine(s.x,s.y,n.x,n.y);r.setAttribute("stroke",this.#n.CHART_LINE_COLOR),r.setAttribute("stroke-width",this.#n.CHART_STROKE),t.appendChild(r),e+=5}const i=lt.SVGCircle(this.#o,this.#c,this.getRullerCircleRadius());i.setAttribute("stroke",this.#n.CHART_CIRCLE_COLOR),i.setAttribute("stroke-width",this.#n.CHART_STROKE),t.appendChild(i),this.#O.appendChild(t)}#C(t){const e=t.points,i=t.cusps,s=lt.SVGGroup(),n=Ct.calculatePositionWithoutOverlapping(e,this.#n.POINT_COLLISION_RADIUS,this.getPointCircleRadius());for(const t of e){const e=new At(t,i,this.#n),r=Ct.positionOnCircle(this.#o,this.#o,this.getRullerCircleRadius()-(this.getInnerCircleRadius()-this.getRullerCircleRadius())/4,Ct.degreeToRadian(e.getAngle(),this.getAscendantShift())),a=Ct.positionOnCircle(this.#o,this.#o,this.getPointCircleRadius(),Ct.degreeToRadian(n[e.getName()],this.getAscendantShift())),O=Ct.positionOnCircle(this.#o,this.#o,this.getRullerCircleRadius(),Ct.degreeToRadian(e.getAngle(),this.getAscendantShift())),S=lt.SVGLine(r.x,r.y,O.x,O.y);S.setAttribute("stroke",this.#n.CHART_LINE_COLOR),S.setAttribute("stroke-width",this.#n.CHART_STROKE),s.appendChild(S);const o=e.getSymbol(a.x,a.y,Ct.DEG_0,this.#n.POINT_PROPERTIES_SHOW);o.setAttribute("font-family",this.#n.CHART_FONT_FAMILY),o.setAttribute("text-anchor","middle"),o.setAttribute("dominant-baseline","middle"),o.setAttribute("font-size",this.#n.RADIX_POINTS_FONT_SIZE),o.setAttribute("fill",this.#n.PLANET_COLORS[t.name]??this.#n.CHART_POINTS_COLOR),s.appendChild(o);const c=Ct.positionOnCircle(this.#o,this.#o,this.getPointCircleRadius(),Ct.degreeToRadian(n[e.getName()],this.getAscendantShift())),_=lt.SVGLine(r.x,r.y,(r.x+c.x)/2,(r.y+c.y)/2);_.setAttribute("stroke",this.#n.CHART_LINE_COLOR),_.setAttribute("stroke-width",this.#n.CHART_STROKE/2),s.appendChild(_)}this.#O.appendChild(s)}#d(t){const e=t.points,i=t.cusps,s=[0,3,6,9],n=e.map((t=>t.angle)),r=lt.SVGGroup(),a=this.getCenterCircleRadius()+(this.getInnerCircleRadius()-this.getCenterCircleRadius())/10;for(let t=0;t<i.length;t++){const e=!this.#n.CHART_ALLOW_HOUSE_OVERLAP&&Ct.isCollision(i[t].angle,n,this.#n.POINT_COLLISION_RADIUS/2),O=Ct.positionOnCircle(this.#o,this.#c,this.getCenterCircleRadius(),Ct.degreeToRadian(i[t].angle,this.getAscendantShift())),S=Ct.positionOnCircle(this.#o,this.#c,e?this.getCenterCircleRadius()+(this.getRullerCircleRadius()-this.getCenterCircleRadius())/6:this.getRullerCircleRadius(),Ct.degreeToRadian(i[t].angle,this.getAscendantShift())),o=lt.SVGLine(O.x,O.y,S.x,S.y);o.setAttribute("stroke",s.includes(t)?this.#n.CHART_MAIN_AXIS_COLOR:this.#n.CHART_LINE_COLOR),o.setAttribute("stroke-width",s.includes(t)?this.#n.CHART_MAIN_STROKE:this.#n.CHART_STROKE),r.appendChild(o);const c=i[t].angle,_=i[(t+1)%12].angle,h=c+(_-c>0?_-c:_-c+Ct.DEG_360)/2,u=Ct.positionOnCircle(this.#o,this.#c,a,Ct.degreeToRadian(h,this.getAscendantShift())),R=lt.SVGText(u.x,u.y,`${t+1}`);if(R.setAttribute("font-family",this.#n.CHART_FONT_FAMILY),R.setAttribute("text-anchor","middle"),R.setAttribute("dominant-baseline","middle"),R.setAttribute("font-size",this.#n.RADIX_HOUSE_FONT_SIZE),R.setAttribute("fill",this.#n.CHART_HOUSE_NUMBER_COLOR),r.appendChild(R),this.#n.DRAW_HOUSE_DEGREE){if(Array.isArray(this.#n.HOUSE_DEGREE_FILTER)&&!this.#n.HOUSE_DEGREE_FILTER.includes(t))continue;const e=Ct.positionOnCircle(this.#o,this.#c,this.getRullerCircleRadius()-(this.getInnerCircleRadius()-this.getRullerCircleRadius())/1.2,Ct.degreeToRadian(c-2.4,this.getAscendantShift())),s=lt.SVGText(e.x,e.y,Math.floor(i[t].angle%30)+"ยบ");s.setAttribute("font-family","Arial"),s.setAttribute("text-anchor","middle"),s.setAttribute("dominant-baseline","middle"),s.setAttribute("font-size",this.#n.HOUSE_DEGREE_SIZE||this.#n.POINT_PROPERTIES_ANGLE_SIZE/2),s.setAttribute("fill",this.#n.HOUSE_DEGREE_COLOR||this.#n.CHART_HOUSE_NUMBER_COLOR),r.appendChild(s)}}this.#O.appendChild(r)}#E(t){const e=t.cusps,i=[{name:lt.SYMBOL_AS,angle:e[0].angle},{name:lt.SYMBOL_IC,angle:e[3].angle},{name:lt.SYMBOL_DS,angle:e[6].angle},{name:lt.SYMBOL_MC,angle:e[9].angle}],s=lt.SVGGroup(),n=24===this.#r?this.getRadius():this.getInnerCircleRadius(),r=24===this.#r?this.getRadius()+10:this.getInnerCircleRadius()+5;for(const t of i){let e=Ct.positionOnCircle(this.#o,this.#c,n,Ct.degreeToRadian(t.angle,this.getAscendantShift())),i=Ct.positionOnCircle(this.#o,this.#c,r,Ct.degreeToRadian(t.angle,this.getAscendantShift())),a=lt.SVGLine(e.x,e.y,i.x,i.y);a.setAttribute("stroke",this.#n.CHART_MAIN_AXIS_COLOR),a.setAttribute("stroke-width",this.#n.CHART_MAIN_STROKE),s.appendChild(a);let O,S=Ct.positionOnCircle(this.#o,this.#c,r,Ct.degreeToRadian(t.angle,this.getAscendantShift())),o=0,c=0;const _=2;switch(t.name){case"As":o-=_,c-=_,O=lt.SVGSymbol(t.name,S.x+o,S.y+c),O.setAttribute("text-anchor","end"),O.setAttribute("dominant-baseline","middle");break;case"Ds":o+=_,c-=_,O=lt.SVGSymbol(t.name,S.x+o,S.y+c),O.setAttribute("text-anchor","start"),O.setAttribute("dominant-baseline","middle");break;case"Mc":c-=_,O=lt.SVGSymbol(t.name,S.x+o,S.y+c),O.setAttribute("text-anchor","middle"),O.setAttribute("dominant-baseline","text-top");break;case"Ic":c+=_,O=lt.SVGSymbol(t.name,S.x+o,S.y+c),O.setAttribute("text-anchor","middle"),O.setAttribute("dominant-baseline","hanging");break;default:throw console.error(t.name),new Error("Unknown axis name.")}O.setAttribute("font-family",this.#n.CHART_FONT_FAMILY),O.setAttribute("font-size",this.#n.RADIX_AXIS_FONT_SIZE),O.setAttribute("fill",this.#n.CHART_MAIN_AXIS_COLOR),s.appendChild(O)}this.#O.appendChild(s)}#A(){const t=lt.SVGGroup(),e=lt.SVGCircle(this.#o,this.#c,this.getOuterCircleRadius());e.setAttribute("stroke",this.#n.CHART_CIRCLE_COLOR),e.setAttribute("stroke-width",this.#n.CHART_MAIN_STROKE),t.appendChild(e);const i=lt.SVGCircle(this.#o,this.#c,this.getInnerCircleRadius());i.setAttribute("stroke",this.#n.CHART_CIRCLE_COLOR),i.setAttribute("stroke-width",this.#n.CHART_MAIN_STROKE),t.appendChild(i);const s=lt.SVGCircle(this.#o,this.#c,this.getCenterCircleRadius());s.setAttribute("stroke",this.#n.CHART_CIRCLE_COLOR),s.setAttribute("stroke-width",this.#n.CHART_MAIN_STROKE),t.appendChild(s),this.#O.appendChild(t)}}class It extends Et{#r=32;#T;#n;#O;#S;#o;#c;#_;#h;constructor(t){if(!(t instanceof Tt))throw new Error("Bad param radix.");return super(t.getUniverse().getSettings()),this.#T=t,this.#n=this.#T.getUniverse().getSettings(),this.#o=this.#n.CHART_VIEWBOX_WIDTH/2,this.#c=this.#n.CHART_VIEWBOX_HEIGHT/2,this.#_=Math.min(this.#o,this.#c)-this.#n.CHART_PADDING,this.#O=lt.SVGGroup(),this.#O.setAttribute("id",`${this.#n.HTML_ELEMENT_ID}-${this.#n.TRANSIT_ID}`),this.#T.getUniverse().getSVGDocument().appendChild(this.#O),this}setData(t){let e=this.validateData(t);if(!e.isValid)throw new Error(e.message);return this.#S=t,this.#u(t),this}getData(){return{points:[...this.#S.points],cusps:[...this.#S.cusps]}}getRadius(){return this.#_}getAspects(t,e,i){if(this.#S)return t=t??[...this.#S.points.filter((t=>!("aspect"in t)||t.aspect)),...this.#S.cusps.filter((t=>t.aspect))],e=e??[...this.#T.getData().points.filter((t=>!("aspect"in t)||t.aspect)),...this.#T.getData().cusps.filter((t=>t.aspect))],i=i??this.#n.DEFAULT_ASPECTS??gt.DEFAULT_ASPECTS,dt.getAspects(t,e,i)}drawAspects(t,e,i){const s=this.#T.getUniverse().getAspectsElement();Ct.cleanUp(s.getAttribute("id"),this.#h);const n=this.getAspects(t,e,i).filter((t=>"Conjunction"!=t.aspect.name)),r=lt.SVGCircle(this.#o,this.#c,this.#T.getCenterCircleRadius());return r.setAttribute("fill",this.#n.ASPECTS_BACKGROUND_COLOR),s.appendChild(r),s.appendChild(dt.drawAspects(this.#T.getCenterCircleRadius(),this.#T.getAscendantShift(),this.#n,n)),this}#u(t){Ct.cleanUp(this.#O.getAttribute("id"),this.#h),this.#T.setNumberOfLevels(this.#r),this.#l(),this.#d(t),this.#n.CHART_DRAW_MAIN_AXIS&&this.#E(t),this.#C(t),this.#A(),this.#n.DRAW_ASPECTS&&this.drawAspects()}#l(){const t=lt.SVGGroup();let e=this.#T.getAscendantShift();for(let i=0;i<72;i++){let s=Ct.positionOnCircle(this.#o,this.#c,this.#I(),Ct.degreeToRadian(e)),n=Ct.positionOnCircle(this.#o,this.#c,i%2?this.getRadius()-(this.getRadius()-this.#I())/2:this.getRadius(),Ct.degreeToRadian(e));const r=lt.SVGLine(s.x,s.y,n.x,n.y);r.setAttribute("stroke",this.#n.CHART_LINE_COLOR),r.setAttribute("stroke-width",this.#n.CHART_STROKE),t.appendChild(r),e+=5}const i=lt.SVGCircle(this.#o,this.#c,this.#I());i.setAttribute("stroke",this.#n.CHART_CIRCLE_COLOR),i.setAttribute("stroke-width",this.#n.CHART_STROKE),t.appendChild(i),this.#O.appendChild(t)}#C(t){const e=t.points,i=t.cusps,s=lt.SVGGroup(),n=Ct.calculatePositionWithoutOverlapping(e,this.#n.POINT_COLLISION_RADIUS,this.#L());for(const t of e){const e=new At(t,i,this.#n),r=Ct.positionOnCircle(this.#o,this.#o,this.#I()-(this.getRadius()-this.#I())/4,Ct.degreeToRadian(e.getAngle(),this.#T.getAscendantShift())),a=Ct.positionOnCircle(this.#o,this.#o,this.#L(),Ct.degreeToRadian(n[e.getName()],this.#T.getAscendantShift())),O=Ct.positionOnCircle(this.#o,this.#o,this.#I(),Ct.degreeToRadian(e.getAngle(),this.#T.getAscendantShift())),S=lt.SVGLine(r.x,r.y,O.x,O.y);S.setAttribute("stroke",this.#n.CHART_LINE_COLOR),S.setAttribute("stroke-width",this.#n.CHART_STROKE),s.appendChild(S);const o=e.getSymbol(a.x,a.y,Ct.DEG_0,this.#n.POINT_PROPERTIES_SHOW);o.setAttribute("font-family",this.#n.CHART_FONT_FAMILY),o.setAttribute("text-anchor","middle"),o.setAttribute("dominant-baseline","middle"),o.setAttribute("font-size",this.#n.TRANSIT_POINTS_FONT_SIZE),o.setAttribute("fill",this.#n.TRANSIT_PLANET_COLORS[t.name]??this.#n.PLANET_COLORS[t.name]??this.#n.CHART_POINTS_COLOR),s.appendChild(o);const c=Ct.positionOnCircle(this.#o,this.#o,this.#L(),Ct.degreeToRadian(n[e.getName()],this.#T.getAscendantShift())),_=lt.SVGLine(r.x,r.y,(r.x+c.x)/2,(r.y+c.y)/2);_.setAttribute("stroke",this.#n.CHART_LINE_COLOR),_.setAttribute("stroke-width",this.#n.CHART_STROKE/2),s.appendChild(_)}this.#O.appendChild(s)}#d(t){const e=t.points,i=t.cusps,s=e.map((t=>t.angle)),n=lt.SVGGroup(),r=this.#N()+(this.#I()-this.#N())/6;for(let t=0;t<i.length;t++){const e=!this.#n.CHART_ALLOW_HOUSE_OVERLAP&&Ct.isCollision(i[t].angle,s,this.#n.POINT_COLLISION_RADIUS/2),a=Ct.positionOnCircle(this.#o,this.#c,this.#N(),Ct.degreeToRadian(i[t].angle,this.#T.getAscendantShift())),O=Ct.positionOnCircle(this.#o,this.#c,e?this.#N()+(this.#I()-this.#N())/6:this.#I(),Ct.degreeToRadian(i[t].angle,this.#T.getAscendantShift())),S=lt.SVGLine(a.x,a.y,O.x,O.y);S.setAttribute("stroke",this.#n.CHART_LINE_COLOR),S.setAttribute("stroke-width",this.#n.CHART_STROKE),n.appendChild(S);const o=i[t].angle,c=i[(t+1)%12].angle,_=o+(c-o>0?c-o:c-o+Ct.DEG_360)/2,h=Ct.positionOnCircle(this.#o,this.#c,r,Ct.degreeToRadian(_,this.#T.getAscendantShift())),u=lt.SVGText(h.x,h.y,`${t+1}`);if(u.setAttribute("font-family",this.#n.CHART_FONT_FAMILY),u.setAttribute("text-anchor","middle"),u.setAttribute("dominant-baseline","middle"),u.setAttribute("font-size",this.#n.RADIX_HOUSE_FONT_SIZE),u.setAttribute("fill",this.#n.TRANSIT_HOUSE_NUMBER_COLOR||this.#n.CHART_HOUSE_NUMBER_COLOR),n.appendChild(u),this.#n.DRAW_HOUSE_DEGREE){if(Array.isArray(this.#n.HOUSE_DEGREE_FILTER)&&!this.#n.HOUSE_DEGREE_FILTER.includes(t))continue;const e=Ct.positionOnCircle(this.#o,this.#c,this.#I()-(this.getRadius()-this.#I()),Ct.degreeToRadian(o-1.75,this.#T.getAscendantShift())),s=lt.SVGText(e.x,e.y,Math.floor(i[t].angle%30)+"ยบ");s.setAttribute("font-family","Arial"),s.setAttribute("text-anchor","middle"),s.setAttribute("dominant-baseline","middle"),s.setAttribute("font-size",this.#n.HOUSE_DEGREE_SIZE||this.#n.POINT_PROPERTIES_ANGLE_SIZE/2),s.setAttribute("fill",this.#n.HOUSE_DEGREE_COLOR||this.#n.TRANSIT_HOUSE_NUMBER_COLOR||this.#n.CHART_HOUSE_NUMBER_COLOR),n.appendChild(s)}}this.#O.appendChild(n)}#E(t){const e=t.cusps,i=[{name:lt.SYMBOL_AS,angle:e[0].angle},{name:lt.SYMBOL_IC,angle:e[3].angle},{name:lt.SYMBOL_DS,angle:e[6].angle},{name:lt.SYMBOL_MC,angle:e[9].angle}],s=lt.SVGGroup(),n=this.getRadius(),r=this.getRadius()+10;for(const t of i){let e=Ct.positionOnCircle(this.#o,this.#c,n,Ct.degreeToRadian(t.angle,this.#T.getAscendantShift())),i=Ct.positionOnCircle(this.#o,this.#c,r,Ct.degreeToRadian(t.angle,this.#T.getAscendantShift())),a=lt.SVGLine(e.x,e.y,i.x,i.y);a.setAttribute("stroke",this.#n.CHART_MAIN_AXIS_COLOR),a.setAttribute("stroke-width",this.#n.CHART_MAIN_STROKE),s.appendChild(a);let O,S=Ct.positionOnCircle(this.#o,this.#c,r,Ct.degreeToRadian(t.angle,this.#T.getAscendantShift())),o=0,c=0;const _=2;switch(t.name){case"As":o-=_,c-=_,O=lt.SVGSymbol(t.name,S.x+o,S.y+c),O.setAttribute("text-anchor","end"),O.setAttribute("dominant-baseline","middle");break;case"Ds":o+=_,c-=_,O=lt.SVGSymbol(t.name,S.x+o,S.y+c),O.setAttribute("text-anchor","start"),O.setAttribute("dominant-baseline","middle");break;case"Mc":c-=_,O=lt.SVGSymbol(t.name,S.x+o,S.y+c),O.setAttribute("text-anchor","middle"),O.setAttribute("dominant-baseline","text-top");break;case"Ic":c+=_,O=lt.SVGSymbol(t.name,S.x+o,S.y+c),O.setAttribute("text-anchor","middle"),O.setAttribute("dominant-baseline","hanging");break;default:throw console.error(t.name),new Error("Unknown axis name.")}O.setAttribute("font-family",this.#n.CHART_FONT_FAMILY),O.setAttribute("font-size",this.#n.RADIX_AXIS_FONT_SIZE),O.setAttribute("fill",this.#n.CHART_MAIN_AXIS_COLOR),s.appendChild(O)}this.#O.appendChild(s)}#A(){const t=lt.SVGGroup(),e=lt.SVGCircle(this.#o,this.#c,this.getRadius());e.setAttribute("stroke",this.#n.CHART_CIRCLE_COLOR),e.setAttribute("stroke-width",this.#n.CHART_MAIN_STROKE),t.appendChild(e),this.#O.appendChild(t)}#L(){return this.getRadius()/this.#r*29}#I(){return this.getRadius()/this.#r*31}#N(){return this.getRadius()/this.#r*24}}class Lt{#p;#n;#T;#M;#b;constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof t)throw new Error("A required parameter is missing.");if(!document.getElementById(t))throw new Error("Canot find a HTML element with ID "+t);this.#n=Object.assign({},gt,e,{HTML_ELEMENT_ID:t}),this.#p=lt.SVGDocument(this.#n.CHART_VIEWBOX_WIDTH,this.#n.CHART_VIEWBOX_HEIGHT),document.getElementById(t).appendChild(this.#p);const i=lt.SVGCircle(this.#n.CHART_VIEWBOX_WIDTH/2,this.#n.CHART_VIEWBOX_HEIGHT/2,this.#n.CHART_VIEWBOX_WIDTH/2);return i.setAttribute("fill",this.#n.CHART_BACKGROUND_COLOR),this.#p.appendChild(i),this.#b=lt.SVGGroup(),this.#b.setAttribute("id",`${this.#n.HTML_ELEMENT_ID}-${this.#n.ASPECTS_ID}`),this.#p.appendChild(this.#b),this.#T=new Tt(this),this.#M=new It(this.#T),this.#m("Astronomicon","../assets/fonts/ttf/AstronomiconFonts_1.1/Astronomicon.ttf"),this}radix(){return this.#T}transit(){return this.#M}getSettings(){return this.#n}getSVGDocument(){return this.#p}getAspectsElement(){return this.#b}async#m(t,e,i){if(!("FontFace"in window))return console.error("Ooops, FontFace is not a function."),void console.error("@see https://developer.mozilla.org/en-US/docs/Web/API/CSS_Font_Loading_API");const s=new FontFace(t,`url(${e})`,i);try{await s.load(),document.fonts.add(s)}catch(t){throw new Error(t)}}}return e})()));